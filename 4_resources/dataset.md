# RflyMAD: A Dataset for Multicopter Fault Detection and Health Assessment

This site presents the RflyMAD dataset which is used for multicopter fault detection and health assessment. The dataset is collected from RflySim platform and real flight by Beihang Reliable Flight Control Group (Rfly). There are 5500 flight cases in total in the dataset, 2500 for software-in-the-loop (SIL) simulatin, 2500 for hardware-in-the-loop (HIL) simulation and 497 for real flight. The dataset includes 11 types of common faults under 6 flight statuses to cover more occasions in which the multicopters have different mobility levels when faults occur.

## What is RflyMAD?
Different from research fields like computer vision, batteries, and mechanical vibration, there are relatively few publicly datasets related to the FDI problem and  health assessment of aircraft systems. Regarding the lack of fault dataset, we form RflyMAD dataset. It contains both simulation and real flight data, and covers sufficient fault types and flight statuses, ensuring both quantity and quality.

The hierarchy of RflyMAD dataset is shown in the following figure.
<img src="./hierarchy.png" style="zoom: 55%;" />

Note: In `Real Flight Data`, there are extra velocity and direction of wind data recorded in the experiments.

### Varied Multicopters
<img src="./plane_droneyee.png" style="zoom: 35%;" />

In real flight experiments, in order to enhance the generalization of the dataset, three multicopters with different diagonal sizes are used to collect data. They are Droneyee X200 (Diagonal size of 200mm, 1.054kg), Droneyee X450 (Diagonal size of 450mm, 2.084kg) and Droneyee X680 (Diagonal size of 680mm, 4.068kg).

Note: The physical parameters of multicopter dynamic model uesd in SIL simulation data and HIL simulation data are achieved from Droneyee X450, including weights, Moment of Inertia and motor parameters.

### Broad Fault Types
There are 11 fault types in RflyMAD dataset, covering the actuators, sensors of the multicopter and environmental effects. The exact cases in each fault type are listed in the following table.
| Type of Faults | SIL Simulation | HIL Simulation | Real Flight |
| -------------- | -------------- | -------------- | ----------- |
| Motor(1-4)     | 921            | 921            | 231         |
| Propeller(1-4) | 435            | 435            | $\times$    |
| Low Voltage    | 20             | 20             | $\times$    |
| Wind Affect    | 150            | 150            | $\times$    |
| Load Lose      | 150            | 150            | $\times$    |
| Sensors' Noise | 50             | 50             | 82          |
| Accelerometer  | 128            | 128            | 20          |
| Gyroscope      | 128            | 128            | 20          |
| Magnetometer   | 128            | 128            | 20          |
| Barometer      | 128            | 128            | 20          |
| GPS            | 128            | 128            | 20          |
| No Fault       | 200            | 200            | 84          |
| Total          | 2566           | 2566           | 497         |

Note: $\times$ represents this item does not exist in sub-dataset and the number means the amount of corrresponding cases. 

Motor(1-4) represents the number of fail motors is in range of 1 to 4.

### Sufficient Flight Statuses

The following table lists all 6 flight statuses in this dataset. 
|Flight status      |SIL Simulation|HIL Simulation|Real Flight|
|-------------------|--------------|--------------|-----------|
|Hover              |$\surd$       |$\surd$       |$\surd$    |
|Waypoints          |$\surd$       |$\surd$       |$\surd$    |
|Velocity Control   |$\surd$       |$\surd$       |$\surd$    |
|Circling           |$\surd$       |$\surd$       |$\surd$    |
|Acceleration       |$\surd$       |$\surd$       |$\surd$    |
|Deceleration       |$\surd$       |$\surd$       |$\times$   |

Note: $\surd$ represents this item exists in sub-dataset and $\times$ represents not.

### Exact Data in One Flight Case

As shown in the figure of dataset hierarchy, each flight within the dataset contains four types of raw data and their processed files, and they could be described as follows:
- `Flight information`: It contains the flight command (e.g., take off, land and move to a target position), fault types and fault parameters.
- `ULog`: PX4 uses it to log uORB topics as messages, including device inputs (e.g., sensors, RC inputs), internal state(e.g., attitude, EKF states), and String messages.
- `Telemetry log`: TLog is recorded by the ground station, and the main content is the information sent and received between a multicopter and its corresponding QGC. Thus the frequency of the data is influenced by the communication quality in real flight or the performance of the simulation computer.
- `True Data`: This data is generated by the RflySim platform during the simulation flight and recorded at a frequency of 250Hz. It contains the position and attitude information of the multicopter and motor speed.
- `BAG`: The BAG file is generated by the ROS system in each real flight. It contains the position, attitude, and control commands of the multicopter.

Note: It is worth noting that the `True data` only exist in simulation data and the `BAG` files only in real flight data, so there are still four types of data in each flight.


## Citation

If you use some data from our dataset or pre-processing tools in our repositories, please cite it as:
```bash
@article{

}
```
## Downloads
The Dataset is restored in ,
|Name          |Link    |Size   |Remark|
|--------------|--------|-------|------|
|SIL-Motor(1)  |[.rar]()|8.56GB |SIL Simulation data, including flight statuses like hover and circling|
|SIL-Motor(2)  |[.rar]()|7.53GB |SIL Simulation data, including flight statuses like waypoints, velocity, acceleration and deceleration|
|SIL-Prop      |[.rar]()|6.69GB |SIL Simulation data, including all flight statuses with propeller fault|
|SIL-Sensors   |[.rar]()|11GB   |SIL Simulation data, including all flight statuses with accelerometer, gyroscope, magnetometer, barometer and GPS fault|
|SIL-Voltage   |[.rar]()|292MB  |SIL Simulation data, low-voltage fault type|
|SIL-Wind      |[.rar]()|2.1GB  |SIL Simulation data, different wind types and strength|
|SIL-Load      |[.rar]()|2.1GB  |SIL Simulation data, changing the weight or distribution of loads in multicopter during the flight|
|SIL-No Fault  |[.rar]()|2.85GB |SIL Simulation data, including all flight statuses with no fault|
|HIL-Motor(1)  |[.rar]()|8.56GB |HIL Simulation data, including flight statuses like hover and circling|
|HIL-Motor(2)  |[.rar]()|7.53GB |HIL Simulation data, including flight statuses like waypoints, velocity, acceleration and deceleration|
|HIL-Prop      |[.rar]()|6.69GB |HIL Simulation data, including all flight statuses with propeller fault|
|HIL-Sensors   |[.rar]()|11GB   |HIL Simulation data, including all flight statuses with accelerometer, gyroscope, magnetometer, barometer and GPS fault|
|HIL-Voltage   |[.rar]()|292MB  |HIL Simulation data, low-voltage fault type|
|HIL-Wind      |[.rar]()|2.1GB  |HIL Simulation data, different wind types and strength|
|HIL-Load      |[.rar]()|2.1GB  |HIL Simulation data, changing the weight or distribution of loads in multicopter during the flight|
|HIL-No Fault  |[.rar]()|2.85GB |SIL Simulation data, including all flight statuses with no fault|
|Real-Motor    |[.rar]()|15.09GB|Real flight data, including three diagonal size multicopters|
|Real-Sensors  |[.rar]()|11.76GB|Real flight data, including three diagonal size multicopters|
|Real-No Fault |[.rar]()|5.49GB |Real flight data, including three diagonal size multicopters|

If you have problems to download the dataset from the above `Link`, you can also download them in [YunPan]().

## Quick Use
## Samples


## Notes
For more information about how to use our dataset, please check other parts of our [OpenHA](https://rfly-openha.github.io/documents/) websites.

## Licence
RflyMAD dataset is copyright by Reliable Flight Control Group, Beihang University and published under the [Creative Commons Attribution-NonCommercial-ShareAlike 4.0 License](https://creativecommons.org/licenses/by-nc-sa/4.0/). The dataset and related work are supposed to be used in non-commercial situations. If you are intended to use it for commercial purposes, please [contact us](http://rfly.buaa.edu.cn/index.html#/home).
